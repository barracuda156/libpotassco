sudo: false
language: cpp
env:
  - compiler='g++-4.9' build_type='Debug'
  - compiler='g++-4.9' build_type='Release'
  - compiler='g++-5' build_type='Debug'
  - compiler='g++-5' build_type='Release'
  - compiler='clang++' build_type='Debug'
  - compiler='clang++' build_type='Release'
matrix:
  include:
    - os: linux
      compiler: gcc
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-4.9
            - g++-5
    - os: osx
      osx_image: xcode8
  exclude:
    - os: linux
      env: compiler='clang++'
    - os: osx
      env: compiler='g++-4.9'
    - os: osx
      env: compiler='g++-5'

install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update  ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install cmake; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then export CMAKE=cmake; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then wget --no-check-certificate https://www.cmake.org/files/v3.3/cmake-3.3.1-Linux-x86_64.tar.gz ; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then tar -xzf cmake-3.3.1-Linux-x86_64.tar.gz ; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then export CMAKE=$TRAVIS_BUILD_DIR/cmake-3.3.1-Linux-x86_64/bin/cmake; fi
  - export CXX=$compiler
  - $CMAKE --version
  - $CXX --version
script:
  - mkdir $CXX && cd $CXX
  - $CMAKE -DCMAKE_BUILD_TYPE=$build_type -DCMAKE_CXX_FLAGS="-Wall -Wextra" ../
  - make -j3
  - ./tests/potassco_test_lp
  - ./tests/potassco_test_opts
